<!DOCTYPE html>
<html>
<head>    
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    
<style>
body {
	font-family: Arial, sans-serif;
	background-color: white;
	margin: 0;
	padding: 0;
	}

.container {
	max-width: 95%;
    	margin: 0 auto;
	padding: 20px;
	background-color: #fff;
	border-radius: 4px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	}

h1 {
	text-align: center;
	color: #333;
	}

table {
	width: 100%;
	border-collapse: collapse;
	margin-bottom: 20px;
	}

th {
	border: 2px solid #ddd;
	padding: 10px;
	text-align: center;
	background-color: #f2f2f2;
	}

td {
	border: 2px solid #ddd;
	padding: 10px;
	text-align: right;
	background-color: #f2f2f2;
	}

td.label {
	text-align: left;
}

td.dd {
	text-align: left;
}

input[type="text"] {
    	width: 99%;
    	padding: 5px;
    	border: 1px solid #ddd;
    	border-radius: 4px;
    	text-align: left;
    	box-sizing: border-box;
	}

input[type="number"] {
	width: 99%;
    	padding: 5px;
    	border: 1px solid #ddd;
    	border-radius: 4px;
    	text-align: right;
    	box-sizing: border-box;
	}
	
input[type="tel"] {
	width: 99%;
	padding: 5px;
	border: 1px solid #ddd;
	border-radius: 4px;
	text-align: left;
	box-sizing: border-box;
	}
select {
    	width: 99%;
    	padding: 5px;
    	border: 1px solid #ddd;
    	border-radius: 4px;
    	text-align: left;
    	box-sizing: border-box;
    	}

button {
    	display: block;
    	width: 100%;
    	padding: 10px;
    	background-color: #4CAF50;
    	color: white;
    	border: none;
    	border-radius: 4px;
    	cursor: pointer;
    	}

button:hover {
    	background-color: #45a049;
    	}

#grandTotal {
    	font-weight: bold;
    	}

.error-message {
    	color: red;
    	text-align: right;
    	}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
<div class="container">
<form method="post" action="" id="myForm"> 
<table>
	<tr> <td class="label">Company Name</td>
		<td>
		<select class="dd" name="companyName">	<option value="IIFL">IIFL</option>	<option value="Ashirbad">Ashirbad</option>	</select>
		</td>
	</tr>
	<tr>
		<td class="label">Emp ID</td>
		<td><input type="text" name="empId" required></td>
	</tr>
	<tr>
		<td class="label" placeholder="Mobile Number">Mobile Number</td>
		<td><input type="tel" id="mobileNumber" name="mobileNumber" required></td>
	</tr>
</table>

<P colspan="10" class="error-message" id="mobileNumberError"></P>
			
<table>
	<thead>	<tr> <th>Currency</th> <th>Count</th> <th>Amount</th> </tr> </thead>
	
	<tbody>
		<tr> <td> 500 x</td>	<td><input type="number" class="noteCount" id="x500" name="INR500"> </td> <td class="grand" id="t500"> 	0 </td> </tr>
        	<tr> <td> 200 x</td>	<td><input type="number" class="noteCount" id="x200" name="INR200"> </td> <td class="grand" id="t200"> 	0 </td> </tr>
		<tr> <td> 100 x</td>	<td><input type="number" class="noteCount" id="x100" name="INR100"> </td> <td class="grand" id="t100"> 	0 </td> </tr>
		<tr> <td> 50 x</td>	<td><input type="number" class="noteCount" id="x50" name="INR50"> </td> <td class="grand" id="t50"> 	0 </td> </tr>
		<tr> <td> 20 x</td>	<td><input type="number" class="noteCount" id="x20" name="INR20"> </td> <td class="grand" id="t20"> 	0 </td> </tr>
		<tr> <td> 10 x</td>	<td><input type="number" class="noteCount" id="x10" name="INR10"> </td> <td class="grand" id="t10"> 	0 </td> </tr>
		<tr> <td> Online x</td>	<td><input type="number" class="noteCount" id="x1" name="INR1"> </td> <td class="grand" id="t1"> 	0 </td> </tr>
		<tr> <td colspan="2" style="text-align: right;">Total =</td> <td id="grandTotal" name="total">0</td> </tr>
		<tr> <td colspan="3" style="text-align: right;" id="grandTotalInWords"> In Words </td> </tr>
	</tbody>
</table>
<button type="submit" id="submitBtn" >SUBMIT</button>
</form>
</div>

<script>

$('#mobileNumber').on('input', function() {
	var mobileNumber = $(this).val();
	if (mobileNumber.length !== 10) {
		$('#mobileNumberError').text('Mobile number must be 10 digits');
	}
	else {
		$('#mobileNumberError').text('');
	}
});

$(document).ready(function() {
	$('.noteCount').change(function() {
		var countId = this.id;
		var denomination = parseInt(countId.substring(1));
		var amountId = "t" + denomination;
		var amountEle = document.getElementById(amountId);
		var x = parseFloat(this.value) * parseFloat(denomination);
		amountEle.innerHTML = x;
		
		refreshTotal();
	});
	
	function refreshTotal() {
		var sum = 0;
		$('.grand').each(function(index) {
			sum += parseFloat(this.innerHTML);
		});
		$('#grandTotal').html(sum);
		var totalInWords = convertNumberToWords(sum);
		$('#grandTotalInWords').text(totalInWords);
	}

	function convertNumberToWords(number) {
    var words = ["", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten",
                 "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"];
    var tens = ["", "", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];

    function convertLessThanOneThousand(n) {
        var result = "";
        if (n >= 100) {
            result += words[Math.floor(n / 100)] + " Hundred";
            n %= 100;
            if (n > 0) {
                result += " and ";
            }
        }
        if (n >= 20) {
            result += tens[Math.floor(n / 10)];
            n %= 10;
            if (n > 0) {
                result += " " + words[n];
            }
        } else if (n > 0) {
            result += words[n];
        }
        return result;
    }

    if (number == 0) {
        return "Zero";
    }

    var result = "";
    if (number >= 10000000) {
        result += convertLessThanOneThousand(Math.floor(number / 10000000)) + " Crore ";
        number %= 10000000;
    }
    if (number >= 100000) {
        result += convertLessThanOneThousand(Math.floor(number / 100000)) + " Lakh ";
        number %= 100000;
    }
    if (number >= 1000) {
        result += convertLessThanOneThousand(Math.floor(number / 1000)) + " Thousand ";
        number %= 1000;
    }
    if (number > 0) {
        result += convertLessThanOneThousand(number);
    }
    return result.trim();
}
var grandTotal = parseFloat(document.getElementById('grandTotal').innerHTML);
var grandTotalWords = convertNumberToWords(grandTotal);
console.log(grandTotalWords);

function displayPopupMessage(totalAmount, totalAmountText) {
	var confirmation = confirm("Total Amount: " + totalAmount + "\n " + totalAmountText + "\n\n Do you want to submit?");
	return confirmation;
}

$('#submitBtn').click(function() {
	var grandTotal = parseFloat($('#grandTotal').text());
	var grandTotalWords = $('#grandTotalInWords').text();
	
	if (displayPopupMessage(grandTotal, grandTotalWords)) {
		$('#myForm').submit();
	}
});

});
</script>
</body>
</html>
